import { Button, VerticalBox , LineEdit} from "std-widgets.slint";
import { FilePathSelection } from "components/file-selection.slint";
import { WorkshopPathController } from "controller/workshop-path.slint";

export { WorkshopPathController }

export component Main inherits Window {
  property<string> mgr-path: "";

  preferred-width: 1000px;
  preferred-height: 500px;
  padding: 10px;
  background: black;
  ws-select := FilePathSelection{
      y: 10px;
      x: 10px;
      width: 980px;
      label: "Path of rF2 workshop files:";
      path: WorkshopPathController.path;
      is-valid: WorkshopPathController.is-valid;
      path-accepted(s) => { WorkshopPathController.path-accepted(s) }
      choose-click => { WorkshopPathController.choose-dir() }
      edited => { WorkshopPathController.is-valid = false }
  }
  modmgr-select := FilePathSelection{
      y: 70px;
      x: 10px;
      width: 980px;
      label: "Path of rF2 ModMgr.exe:";
      path: mgr-path;
      path-accepted(s) => {
          root.mgr-path-accepted(s);
      }
      choose-click => {
          root.mgr-choose-dir();
      }
  }

  callback mgr-path-accepted(string);
  callback mgr-choose-dir();
  callback mgr-change-path(string);
  mgr-change-path(s) => { mgr-path = s; }
  callback mgr-validate-path;
  // mgr-validate-path => { modmgr-select.validate-path(); }
}
